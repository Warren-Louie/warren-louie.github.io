<!DOCTYPE html>
<html>
<head>
    <style>
        body { margin: 0; }
    </style>
    <script>
        const PIXELS_TO_SUBTRACT = 80;

        function sendViewportSize() {
            const viewportHeight = window.outerHeight;
            const adjustedHeight = viewportHeight - PIXELS_TO_SUBTRACT;
            const finalHeight = Math.max(adjustedHeight, 0);

            // Log to ensure the function is called and values are correct
            console.log('Sending viewport height:', viewportHeight);
            console.log('Sending adjusted height:', finalHeight);

            window.parent.postMessage({ type: 'viewportSize', height: finalHeight }, '*');
        }

        window.addEventListener('resize', () => {
            console.log('Resize event detected');
            sendViewportSize();
        });
        window.addEventListener('load', sendViewportSize);
        document.addEventListener('DOMContentLoaded', sendViewportSize);
    </script>
</head>
<body>
</body>
</html>
